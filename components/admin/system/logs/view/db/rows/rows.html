{% set logs = createModel('Logs') %}
{% set log_level = searchValue('level','logs') %}
{% if log_level is not empty %}
{% set logs = logs.logsLevelQuery(log_level) %}
{% endif %}
{% set logs = logs.orderBy('date_created','desc') %}
{% set paginator = paginate(logs,'events') %}
{% if paginator.getItems()|length == 0 %}
<tr>
    <td>..</td>
</tr>
{% endif %}
{% for row in paginator.getItems() %}
    <tr>          
        <td class="single line">
            {{ row.date_created|dateFormat }} {{ row.date_created|timeFormat }}
        </td>
        <td>
            <div class="badge badge-sm badge-outline {{ (row.level == 400) ? 'badge-error' : '' }}">
                {{ row.level_name }}
            </div>
        </td>
        <td>
            {{ row.message }}
        </td>           
        <td>
            {% if row.context|length > 0 %}
                <div class="flex flex-row items-center">
                {% for key, value in row.context %}
                    <div class="badge badge-sm badge-outline">
                        {{ key }}
                        <span class="font-bold">
                            {{ (value is iterable) ? value|dump : value }}
                        </span>
                    </div>
                {% endfor %}
                </div>
            {% endif %}
        </td>           
    </tr>
{% endfor %}