{% set user_id = service('access').getId() %}
{% set user_details = createModel('UserDetails','users').findByColumn(user_id,'user_id') %}   
<div class="hs-dropdown dropdown-end">
    <button 
        id="dropdown_avatar" 
        type="button" 
        class="hs-dropdown-toggle flex self-center" 
        aria-haspopup="menu" 
        aria-expanded="false" 
        aria-label="User menu">
        <div class="{{ styles.avatar.ring }}">   
            {% if user_details.avatar is not empty %}                            
                <img 
                    class="w-6 h-6"
                    alt="Avatar" 
                    src="{{ url(service('users').getViewAvatarUrl(),true) }}" />            
            {% else %}  
                {{ component('icons~user',{ size: 'h-6 w-6' },'svg') }}  
            {% endif %}
        </div>       
    </button>    
    <ul 
        class="bg-white rounded dark:bg-gray-800 hs-dropdown-menu hs-dropdown-open:opacity-100 hidden min-w-60 shadow" 
        role="menu" 
        aria-orientation="vertical" 
        aria-labelledby="dropdown-avatar"> 
        {% for item in links %}
            <li 
                mountTo="tool_content"
                component="{{ item.component }}"
                class="dropdown-item user-menu-item {{ theme.link.menu }}">
                {{ component(item.icon,theme.icons.menu,'svg') }}
                <div class="mx-2">
                    {{ item.title }}
                </div>
            </li>
        {% endfor %}
    </ul>
</div>