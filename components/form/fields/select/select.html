{% autoescape false %}

{% set dropdownClasses = dropdownClasses|default("advance-select-menu") %}
{% set optionTemplate = optionTemplate|default("<div class=\"flex flex-grow justify-between items-center w-full\"><span data-title></span><span class=\"icon-[tabler--check] shrink-0  text-primary hidden selected:block \"></span></div>") %}
{% set toggleClasses = toggleClasses|default('advance-select-toggle select-disabled:pointer-events-none select-disabled:opacity-40') %}
{% set optionClasses = optionClasses|default("advance-select-option selected:select-active") %}
{% set toggleTag = toggleTag|default("<button type=\"button\" aria-expanded=\"false\"></button>") %}
{% set extraMarkup = extraMarkup|default("") %}
<div class="join w-full">    
    <div        
        class="{{ class|default('w-full') }}">           
        <select    
            {{ (multiple == true) ? 'multiple' : '' }}   
            id="{{ component_id }}"
            name="{{ name }}"
            rule="{{ rule }}"
            optionTemplate='{{ optionTemplate|raw }}'
            apiSearchQueryKey="{{ apiSearchQueryKey|default('query') }}"
            searchPlaceholder="{{ searchPlaceholder|default(placeholder) }}"
            placeholder="{{ placeholder }}"
            hasSearch="{{ hasSearch|default(true) }}"
            apiDataPart="{{ apiDataPart|default('results') }}"
            apiIconTag='{{ apiIconTag|raw }}'
            toggleTag='{{ toggleTag|raw }}'
            apiQuery="{{ apiQuery }}"  
            toggleClasses="{{ toggleClasses }} {{ size }}"
            dropdownClasses="{{ dropdownClasses }}"
            optionClasses="{{ optionClasses }}"
            extraMarkup="{{ extraMarkup|raw }}"
            isSearchDirectMatch="{{ isSearchDirectMatch|default('false') }}"
            class="join-item shrink-0 --prevent-on-load-init flex-grow"
            apiSelectedValues="{{ selected }}"
            apiUrl="{{ apiUrl }}"
            apiFieldsMap='{      
                "id": "value",        
                "val": "value",
                "title": "name"
            }'
            data-hs-select='{          
                "apiOptions": {
                    "query": "query"
                }    
            }'>   
            <option value="">{{ labels.all }}</option>         
        </select>       
    </div>    
    {% if clear_button == true %}
        <button 
            id="{{ component_id }}_clear_button"
            class="join-item clear-button btn btn-icon btn-outline {{ button_class }}">
            {{ component('icons~close',theme.icons.delete,'svg') }}
        </button>
    {% endif %}
</div>

{% endautoescape %}